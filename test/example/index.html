<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Example game</title>
    <script src="libs/head.load.min.js"></script>
    <script type="text/javascript">
    head.js("../../src/core/Entity.js",
            "../../src/core/OrderedLinkedList.js",
            "../../src/core/Core.js",
            "../../src/ticker/Ticker.js",
            "../../src/core/Bits.js",
            "utils/Vector.js",
            "components/Collision.js",
            "components/Position.js",
            "components/RenderCircle.js",
            "components/StageDimensions.js",
            "components/Velocity.js",
            "systems/CollisionSystem.js",
            "systems/MotionSystem.js",
            "systems/RenderSystem.js",
            function () {
                var canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 512;
                document.body.appendChild(canvas);
                var ctx = canvas.getContext('2d');

                var core = new BlueJS.Core(["Collision", "Position", "RenderCircle", "StageDimensions", "Velocity"], {
                    MotionNode: {
                        position: "Position",
                        velocity: "Velocity"
                    },
                    CollisionNode: {
                        position: "Position",
                        velocity: "Velocity",
                        collision: "Collision"
                    },
                    RenderNode: {
                        position: "Position",
                        render: "RenderCircle"
                    }
                });
                core.addSystem(new CollisionSystem(), 1).
                    addSystem(new MotionSystem(), 2).
                    addSystem(new RenderSystem(ctx), 3);

                var stage = new BlueJS.Entity(core);
                stage.add(new StageDimensions(512, 512));

                core.addEntity(stage);

                var ball = new BlueJS.Entity(core);
                ball.add(new Position(150, 100))
                    .add(new Velocity(new Vector([70,20])))
                    .add(new Collision(20))
                    .add(new RenderCircle("blue"));

                core.addEntity(ball);

                var ball2 = new BlueJS.Entity(core);
                ball2.add(new Position(200, 100))
                    .add(new Velocity(new Vector([50,30])))
                    .add(new Collision(20))
                    .add(new RenderCircle("green"));

                core.addEntity(ball2);

                var ball3 = new BlueJS.Entity(core);
                ball3.add(new Position(200, 150))
                    .add(new Velocity(new Vector([80,20])))
                    .add(new Collision(20))
                    .add(new RenderCircle("red"));

                core.addEntity(ball3);

                BlueJS.Ticker.useRAF(false);
                BlueJS.Ticker.setFPS(60);
                BlueJS.Ticker.addListener(core.update);
                BlueJS.Ticker.start();
            });
 
    </script>
    <style>
        canvas {
            border: 2px dotted gray;
        }
    </style>
</head>
<body>
    
</body>
</html>